{"ast":null,"code":"var _jsxFileName = \"/Users/alysurr/Documents/Capstone/drawllab/src/pages/CanvasPage/CanvasPage.jsx\",\n    _s = $RefreshSig$();\n\nimport './CanvasPage.scss';\nimport React, { useLayoutEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport rough from 'roughjs/bundled/rough.esm'; // ----- icons for toolbar -----\n\nimport paintbrush from '../../assets/images/paintbrush.png';\nimport line from '../../assets/images/diagonal-line.png';\nimport square from '../../assets/images/square.png';\nimport selection from '../../assets/images/selection.png';\nimport home from '../../assets/images/home.png';\nimport about from '../../assets/images/about.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst generator = rough.generator();\n\nfunction createElement(id, x1, y1, x2, y2, type) {\n  const roughElement = type === \"line\" ? generator.line(x1, y1, x2, y2) : generator.rectangle(x1, y1, x2 - x1, y2 - y1); // generator.circle(80, 120, 50);;\n\n  return {\n    id,\n    x1,\n    y1,\n    x2,\n    y2,\n    type,\n    roughElement\n  };\n}\n\nconst isWithinElement = (x, y, element) => {\n  const {\n    type,\n    x1,\n    y1,\n    x2,\n    y2\n  } = element;\n\n  if (type === \"rectangle\") {\n    const minX = Math.min(x1, x2);\n    const maxX = Math.max(x1, x2);\n    const minY = Math.min(y1, y2);\n    const maxY = Math.max(y1, y2);\n    return x >= minX && x <= maxX && y >= minY && y <= maxY;\n  } else {\n    const a = {\n      x: x1,\n      y: y1\n    };\n    const b = {\n      x: x2,\n      y: y2\n    };\n    const c = {\n      x,\n      y\n    };\n    const offset = distance(a, b) - (distance(a, c) + distance(b, c));\n    return Math.abs(offset) < 1;\n  }\n};\n\nconst distance = (a, b) => Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n\nconst getElementAtPosition = (x, y, elements) => {\n  return elements.find(element => isWithinElement(x, y, element));\n};\n\nconst adjustElementCoordinates = element => {\n  const {\n    type,\n    x1,\n    y1,\n    x2,\n    y2\n  } = element;\n\n  if (type === \"rectangle\") {\n    const minX = Math.min(x1, x2);\n    const maxX = Math.max(x1, x2);\n    const minY = Math.min(y1, y2);\n    const maxY = Math.max(y1, y2);\n    return {\n      x1: minX,\n      y1: minY,\n      x2: maxX,\n      y2: maxY\n    };\n  } else {\n    if (x1 < x2 || x1 === x2 && y1 < y2) {\n      return {\n        x1,\n        y1,\n        x2,\n        y2\n      };\n    } else {\n      return {\n        x1: x2,\n        y1: y2,\n        x2: x1,\n        y2: y1\n      };\n    }\n  }\n}; // ----- PAGE -----\n\n\nconst CanvasPage = () => {\n  _s();\n\n  // ----- Set State -----\n  const [elements, setElements] = useState([]);\n  const [action, setAction] = useState(\"none\");\n  const [tool, setTool] = useState(\"line\");\n  const [selectedElement, setSelectedElement] = useState(null);\n  useLayoutEffect(() => {\n    const canvas = document.getElementById(\"canvas\");\n    const context = canvas.getContext(\"2d\");\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    const roughCanvas = rough.canvas(canvas);\n    elements.forEach(({\n      roughElement\n    }) => roughCanvas.draw(roughElement));\n  }, [elements]);\n\n  const updateElement = (id, x1, y1, x2, y2, type) => {\n    const updatedElement = createElement(id, x1, y1, x2, y2, type);\n    const elementsCopy = [...elements];\n    elementsCopy[id] = updatedElement;\n    setElements(elementsCopy);\n  };\n\n  const handleMouseDown = e => {\n    const {\n      clientX,\n      clientY\n    } = e;\n\n    if (tool === \"select\") {\n      const element = getElementAtPosition(clientX, clientY, elements);\n\n      if (element) {\n        const offsetX = clientX - element.x1;\n        const offsetY = clientY - element.y1;\n        setSelectedElement({ ...element,\n          offsetX,\n          offsetY\n        });\n        setAction(\"moving\");\n      }\n    } else {\n      const id = elements.length;\n      const element = createElement(id, clientX, clientY, clientX, clientY, tool);\n      setElements(prevState => [...prevState, element]);\n      setAction(\"drawing\");\n    }\n  };\n\n  const handleMouseMove = e => {\n    const {\n      clientX,\n      clientY\n    } = e;\n\n    if (tool === \"select\") {\n      e.target.style.cursor = getElementAtPosition(clientX, clientY, elements) ? \"move\" : \"default\";\n    }\n\n    if (action === \"drawing\") {\n      const index = elements.length - 1;\n      const {\n        x1,\n        y1\n      } = elements[index];\n      updateElement(index, x1, y1, clientX, clientY, tool);\n    } else if (action === \"moving\") {\n      const {\n        id,\n        x1,\n        y1,\n        x2,\n        y2,\n        type,\n        offsetX,\n        offsetY\n      } = selectedElement;\n      const width = x2 - x1;\n      const height = y2 - y1;\n      const nexX1 = clientX - offsetX;\n      const nexY1 = clientY - offsetY;\n      updateElement(id, nexX1, nexY1, nexX1 + width, nexY1 + height, tool);\n    }\n  };\n\n  const handleMouseUp = () => {\n    const index = elements.length - 1;\n    const {\n      id,\n      type\n    } = elements[index];\n\n    if (action === \"drawing\") {\n      const {\n        x1,\n        y1,\n        x2,\n        y2\n      } = adjustElementCoordinates(elements[index]);\n      updateElement(id, x1, y1, x2, y2, type);\n    }\n\n    setAction(\"none\");\n    setSelectedElement(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"toolbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"radio\",\n        id: \"line\",\n        checked: tool === \"line\",\n        onChange: () => setTool(\"line\"),\n        className: \"tool\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"line\",\n        for: \"line\",\n        className: \"tool__label\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: line,\n          alt: \"line icon\",\n          className: \"toolbar__logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"radio\",\n        id: \"rectangle\",\n        checked: tool === \"rectangle\",\n        onChange: () => setTool(\"rectangle\"),\n        className: \"tool\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"rectangle\",\n        for: \"rectangle\",\n        className: \"tool__label\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: square,\n          alt: \"rectangle icon\",\n          className: \"toolbar__logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"radio\",\n        id: \"select\",\n        checked: tool === \"select\",\n        onChange: () => setTool(\"select\"),\n        className: \"tool\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"select\",\n        for: \"select\",\n        className: \"tool__label\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: selection,\n          alt: \"selection icon\",\n          className: \"toolbar__logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"nav\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: home,\n          alt: \"home icon\",\n          className: \"nav__icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/about\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: about,\n          alt: \"about icon\",\n          className: \"nav__icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"canvas\",\n      width: window.innerWidth,\n      height: window.innerHeight,\n      onMouseDown: handleMouseDown,\n      onMouseMove: handleMouseMove,\n      onMouseUp: handleMouseUp,\n      children: \"Canvas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(CanvasPage, \"5X9zEEAI1S7wfbKFXTFdO0sJRGE=\");\n\n_c = CanvasPage;\nexport default CanvasPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CanvasPage\");","map":{"version":3,"sources":["/Users/alysurr/Documents/Capstone/drawllab/src/pages/CanvasPage/CanvasPage.jsx"],"names":["React","useLayoutEffect","useState","Link","rough","paintbrush","line","square","selection","home","about","generator","createElement","id","x1","y1","x2","y2","type","roughElement","rectangle","isWithinElement","x","y","element","minX","Math","min","maxX","max","minY","maxY","a","b","c","offset","distance","abs","sqrt","pow","getElementAtPosition","elements","find","adjustElementCoordinates","CanvasPage","setElements","action","setAction","tool","setTool","selectedElement","setSelectedElement","canvas","document","getElementById","context","getContext","clearRect","width","height","roughCanvas","forEach","draw","updateElement","updatedElement","elementsCopy","handleMouseDown","e","clientX","clientY","offsetX","offsetY","length","prevState","handleMouseMove","target","style","cursor","index","nexX1","nexY1","handleMouseUp","window","innerWidth","innerHeight"],"mappings":"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","sourcesContent":["import './CanvasPage.scss';\nimport React, { useLayoutEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport rough from 'roughjs/bundled/rough.esm';\n\n// ----- icons for toolbar -----\nimport paintbrush from '../../assets/images/paintbrush.png';\nimport line from '../../assets/images/diagonal-line.png';\nimport square from '../../assets/images/square.png';\nimport selection from '../../assets/images/selection.png';\nimport home from '../../assets/images/home.png';\nimport about from '../../assets/images/about.png';\n\nconst generator = rough.generator();\n\nfunction createElement(id, x1, y1, x2, y2, type) {\n\tconst roughElement =\n\t\ttype === \"line\"\n\t\t\t? generator.line(x1, y1, x2, y2)\n\t\t\t: generator.rectangle(x1, y1, x2 - x1, y2 - y1);\n\t\t// generator.circle(80, 120, 50);;\n  return {id, x1, y1, x2, y2, type, roughElement};\n}\n\nconst isWithinElement = (x, y, element) => {\n\tconst { type, x1, y1, x2, y2 } = element;\n  if (type === \"rectangle\") {\n    const minX = Math.min(x1, x2);\n    const maxX = Math.max(x1, x2);\n    const minY = Math.min(y1, y2);\n    const maxY = Math.max(y1, y2);\n    return x >= minX && x <= maxX && y >= minY && y <= maxY;\n  } else {\n\t\tconst a = { x: x1, y: y1 };\n\t\tconst b = { x: x2, y: y2 };\n\t\tconst c = { x, y };\n\t\tconst offset = distance(a, b) - (distance(a, c) + distance(b, c));\n\t\treturn Math.abs(offset) < 1;\n  }\n};\n\nconst distance = (a, b) => Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y-b.y, 2));\n\nconst getElementAtPosition = (x, y, elements) => {\n\treturn elements.find(element => isWithinElement(x, y, element));\n};\n\nconst adjustElementCoordinates = element => {\n  const { type, x1, y1, x2, y2 } = element;\n  if (type === \"rectangle\") {\n    const minX = Math.min(x1, x2);\n    const maxX = Math.max(x1, x2);\n    const minY = Math.min(y1, y2);\n    const maxY = Math.max(y1, y2);\n    return { x1: minX, y1: minY, x2: maxX, y2: maxY };\n  } else {\n    if (x1 < x2 || (x1 === x2 && y1 < y2)) {\n      return { x1, y1, x2, y2 };\n    } else {\n      return { x1: x2, y1: y2, x2: x1, y2: y1 };\n    }\n  }\n};\n\n// ----- PAGE -----\n\nconst CanvasPage = () => {\n\t// ----- Set State -----\n  const [elements, setElements] = useState([]);\n\tconst [action, setAction] = useState(\"none\");\n\tconst [tool, setTool] = useState(\"line\");\n\tconst [selectedElement, setSelectedElement] = useState(null);\n\n  useLayoutEffect(() => {\n    const canvas = document.getElementById(\"canvas\");\n    const context = canvas.getContext(\"2d\");\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    const roughCanvas = rough.canvas(canvas);\n\n    elements.forEach(({roughElement}) => roughCanvas.draw(roughElement));\n\t}, [elements]);\n\t\n\tconst updateElement = (id, x1, y1, x2, y2, type) => {\n\t\tconst updatedElement = createElement(id, x1, y1, x2, y2, type);\n\n\t\tconst elementsCopy = [...elements];\n\t\telementsCopy[id] = updatedElement;\n\t\tsetElements(elementsCopy);\n\t};\n  \n\tconst handleMouseDown = (e) => {\n    const { clientX, clientY } = e;\n\t\t\n\t\tif (tool === \"select\") {\n\t\t\tconst element = getElementAtPosition(clientX, clientY, elements)\n\t\t\tif (element) {\n\t\t\t\tconst offsetX = clientX - element.x1;\n\t\t\t\tconst offsetY = clientY - element.y1;\n\t\t\t\tsetSelectedElement({...element, offsetX, offsetY})\n\t\t\t\tsetAction(\"moving\");\n\t\t\t}\n\t\t} else {\n\t\t\tconst id = elements.length;\n    const element = createElement(id, clientX, clientY, clientX, clientY, tool);\n\t\tsetElements((prevState) => [...prevState, element]);\n\t\t\t\n\t\tsetAction(\"drawing\");\n\n\t\t}\n  };\n  \n\tconst handleMouseMove = (e) => {\n\t\tconst { clientX, clientY } = e;\n\t\tif (tool === \"select\") {\n\t\t\te.target.style.cursor = getElementAtPosition(clientX, clientY, elements) ? \"move\" : \"default\";\n\t\t}\n\n\t\tif (action === \"drawing\") {\n\t\t\tconst index = elements.length - 1;\n\t\t\tconst { x1, y1 } = elements[index];\n\t\t\tupdateElement(index, x1, y1, clientX, clientY, tool);\n\t\t} else if (action === \"moving\") {\n\t\t\tconst { id, x1, y1, x2, y2, type, offsetX, offsetY } = selectedElement;\n\t\t\tconst width = x2 - x1;\n\t\t\tconst height = y2 - y1;\n\t\t\tconst nexX1 = clientX - offsetX;\n\t\t\tconst nexY1 = clientY - offsetY;\n\t\t\tupdateElement(id, nexX1, nexY1, nexX1 + width, nexY1 + height, tool);\n\t\t\n\t\t}\n  };\n  \n\tconst handleMouseUp = () => {\n\t\tconst index = elements.length - 1;\n\t\tconst { id, type } = elements[index];\n\t\tif (action === \"drawing\") {\n\t\t\tconst { x1, y1, x2, y2 } = adjustElementCoordinates(elements[index]);\n\t\t\tupdateElement(id, x1, y1, x2, y2, type);\n\t\t}\n\t\tsetAction(\"none\");\n\t\tsetSelectedElement(null);\n  };\n\n  return (\n\t\t<>\n\t\t\t{/* Toolbar Component */}\n\t\t\t<div className=\"toolbar\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tid=\"line\"\n\t\t\t\t\tchecked={tool === \"line\"}\n\t\t\t\t\tonChange={() => setTool(\"line\")}\n\t\t\t\t\tclassName=\"tool\"\n\t\t\t\t/>\n\t\t\t\t<label\n\t\t\t\t\thtmlFor=\"line\"\n\t\t\t\t\tfor=\"line\"\n\t\t\t\t\tclassName=\"tool__label\"\n\t\t\t\t>\n\t\t\t\t\t<img src={line} alt=\"line icon\" className=\"toolbar__logo\"/>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tid=\"rectangle\"\n\t\t\t\t\tchecked={tool === \"rectangle\"}\n\t\t\t\t\tonChange={() => setTool(\"rectangle\")}\n\t\t\t\t\tclassName=\"tool\"\n\t\t\t\t/>\n\t\t\t\t<label\n\t\t\t\t\thtmlFor=\"rectangle\"\n\t\t\t\t\tfor=\"rectangle\"\n\t\t\t\t\tclassName=\"tool__label\"\n\t\t\t\t>\n\t\t\t\t\t<img src={square} alt=\"rectangle icon\" className=\"toolbar__logo\"/>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tid=\"select\"\n\t\t\t\t\tchecked={tool === \"select\"}\n\t\t\t\t\tonChange={() => setTool(\"select\")}\n\t\t\t\t\tclassName=\"tool\"\n\t\t\t\t/>\n\t\t\t\t<label\n\t\t\t\t\thtmlFor=\"select\"\n\t\t\t\t\tfor=\"select\"\n\t\t\t\t\tclassName=\"tool__label\"\n\t\t\t\t>\n\t\t\t\t\t<img src={selection} alt=\"selection icon\" className=\"toolbar__logo\"/>\n\t\t\t\t</label>\n\t\t\t</div>\n\n\t\t\t<nav className=\"nav\">\n\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t<img src={home} alt=\"home icon\" className=\"nav__icon\"/>\n\t\t\t\t</Link>\n\t\t\t\t<Link to=\"/about\">\n\t\t\t\t\t<img src={about} alt=\"about icon\" className=\"nav__icon\"/>\n\t\t\t\t</Link>\n\t\t\t</nav>\n\n\n\n\t\t\t{/* Canvas Component */}\n      <canvas\n        id=\"canvas\"\n        width={window.innerWidth}\n        height={window.innerHeight}\n        onMouseDown={handleMouseDown}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n      >\n        Canvas\n      </canvas>\n    </>\n  )\n}\n\nexport default CanvasPage;\n"]},"metadata":{},"sourceType":"module"}